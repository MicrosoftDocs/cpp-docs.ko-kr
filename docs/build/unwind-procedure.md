---
title: 해제 절차
ms.date: 11/04/2016
ms.assetid: 82c5d0ca-70be-4d1a-a306-bfe01c29159f
ms.openlocfilehash: 2d68a5c3fb1cc2d18b587d1419b0103d02b35a7f
ms.sourcegitcommit: 6052185696adca270bc9bdbec45a626dd89cdcdd
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/31/2018
ms.locfileid: "50523111"
---
# <a name="unwind-procedure"></a>해제 절차

해제 코드 배열은 내림차순으로 정렬 됩니다. 예외가 발생 하는 컨텍스트 레코드의 운영 체제에서 전체 컨텍스트에 저장 됩니다. 예외 디스패치 논리 호출 되는 예외 처리기를 찾으려면 다음 단계를 반복 해 서 실행.

1. 현재 함수 (또는 연결 된 UNWIND_INFO 항목의 경우 함수 부분)를 설명 하는 RUNTIME_FUNCTION 테이블 항목을 검색할 컨텍스트 레코드에 저장 된 현재 RIP를 사용 합니다.

1. 함수 테이블 항목이 있으면 리프 함수에서 됩니다 및 RSP 반환 포인터를 직접 처리 됩니다. [Rsp] 반환 포인터는 업데이트 된 컨텍스트에 저장 됩니다 하 고 시뮬레이트된 RSP 8 씩 증가 1 단계를 반복 합니다.

1. 함수 테이블 항목이 발견 되는 경우 RIP 에필로그 a)에서 b)에서 프롤로그 또는 c) 예외 처리기로 보호 되어야 하는 코드에서에서 세 개의 지역 내에서 상태로 남아 있을 수 있습니다.

   - 사례는) 경우 RIP가 에필로그 내에서 다음 함수 실행이 종료 된,이 함수에 대 한이 예외와 관련 된 예외 처리기 있을 수 있으며 에필로그의 효과가 호출자 함수의의 컨텍스트에서 계산을 계속 해야 합니다. RIP 켜져 있는지 RIP에서 코드 스트림 에필로그 내에서 확인 하려면이 검사 됩니다. 뒤에 오는 부분을 합법적인 에필로그 코드 스트림에 있는 일치 시킬 수 있습니다 하 고 에필로그에 에필로그의 나머지 부분을 시뮬레이션 하는, 하는 경우 각 명령으로 업데이트 된 컨텍스트 레코드를 사용 하 여 처리 됩니다. 그런 다음 1 단계를 반복 합니다.

   - 사례 b) 제어 되지 않은 다음 RIP 프롤로그 내에 않았으면 함수,이 함수에 대 한이 예외와 관련 된 예외 처리기 있을 수 있습니다 및 프롤로그의 결과 계산 컨텍스트의 호출자 함수를 실행 취소 해야 합니다. RIP은 프롤로그 내 경우 RIP 함수 시작에서 까지의 거리 보다 작거나 해제 정보를 인코딩된 프롤로그 크기와 동일 합니다. 프롤로그의 결과 오프셋과 함께 작거나 같거나 RIP의 오프셋을 함수 시작부터 첫 번째 항목에 대 한 해제 코드 배열은 통해 앞으로 검색 한 다음 해제 코드 배열에서 나머지 모든 항목의 효과 취소 하 여 해제 되었습니다. 1 단계를 반복 합니다.

   - 사례 c) RIP 프롤로그 또는 에필로그와 함수 안에 없을 경우에 예외 처리기 (UNW_FLAG_EHANDLER 설정 됨) 한 다음 언어별 처리기 라고 합니다. 처리기의 데이터를 검색 하 고 필터 함수를 적절 한 호출 합니다. 언어별 처리기는 예외가 처리 되었는지 또는 검색을 계속할 수를 반환할 수 있습니다. 해제를 직접 시작할 수도 있습니다.

1. 언어별 처리기 처리 상태를 반환할 경우 실행을 계속할 경우 원래 컨텍스트 레코드를 사용 하 여 합니다.

1. 언어별 처리기 없거나 "검색을 계속 합니다." 상태를 반환 하는 처리기를 다음 컨텍스트 레코드 없어야 스택이 호출자의 상태입니다. 이 모든 해제 코드 배열 요소를 각각의 효과 실행 취소를 처리 하 여 이루어집니다. 1 단계를 반복 합니다.

연결 하는 경우 해제 정보 관련 된, 이러한 기본 단계를 계속 수행 합니다. 유일한 차이점은 walking 해제 코드 배열은 배열의 끝에 도달 하면 프롤로그의 효과 해제 하려면 다음 연결 된 부모 해제 정보를 찾을 수 없으면 전체 해제 코드 배열은 안내 하는 동안입니다. 이 연결 해제 정보 UNW_CHAINED_INFO 플래그 없이 도착 될 때까지 계속 되 고 해당 해제 코드 배열은 탐색을 완료 합니다.

최소한의 해제 데이터는 8 바이트입니다. 만 스택의 이하의 128 바이트를 할당 하 고 가능한 한 비휘발성 레지스터를 저장 하는 함수를 나타냅니다. 이 연결 된 크기인 이기도 없습니다 해제 코드를 사용 하 여 길이가 0 인 프롤로그에 대 한 정보 구조를 해제 합니다.

## <a name="see-also"></a>참고 항목

[예외 처리(x64)](../build/exception-handling-x64.md)