---
title: 스택 할당 | Microsoft Docs
ms.custom: ''
ms.date: 11/04/2016
ms.technology:
- cpp-tools
ms.topic: conceptual
dev_langs:
- C++
ms.assetid: 098e51f2-eda6-40d0-b149-0b618aa48b47
author: corob-msft
ms.author: corob
ms.workload:
- cplusplus
ms.openlocfilehash: caa6d435db98c7177cbf55b866bb8e5a4a110c1d
ms.sourcegitcommit: 6e479e33e8fd8e30ea32801edbff2e3415f31bf7
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 09/14/2018
ms.locfileid: "32380604"
---
# <a name="stack-allocation"></a>스택 할당
함수의 프롤로그는 로컬 변수에 대 한 스택 공간을 할당, 매개 변수 스택 레지스터 저장 되 고 매개 변수를 등록 합니다.  
  
 매개 변수 영역이 항상 스택의 맨 아래에 (alloca 사용 됨) 해당 값은 항상 반환 주소 옆에 있는 모든 함수 호출 중 되도록 합니다. 4 개 이상의 항목을 포함 하지만 모든 매개 변수를 포함할 충분 한 공간이 호출할 수 있는 모든 함수에서 항상 필요 합니다. 공간 매개 변수 자체 스택에; 넣지 않는 경우에 항상 등록 매개 변수에 대해 할당 되는 호출 수신자는 모든 매개 변수에 대해 할당 된 공간의 보장 됩니다. 집 주소에 레지스터 인수에 대 한 필수 되므로 호출된 된 함수에서 인수 목록 (va_list) 또는 개별 인수로 하는 경우에 인접 한 영역을 사용할 수 있습니다. 이 영역에서는 썽크 실행 하는 동안 및 디버깅 옵션으로 레지스터 인수를 저장 하는 데 편리한 위치 (예를 들어이 쉽게 인수에서 프롤로그 코드의 집 주소에 저장 되는 경우 디버깅 중에). 호출된 된 함수에 4 개 미만의 매개 변수가 하는 경우에 이러한 4 개의 스택 위치가 호출된 된 함수를 효과적으로 소유 하며 호출된 된 함수 매개 변수 레지스터 값을 저장 하는 것 외에도 다른 용도로 사용할 수 있습니다.  따라서 호출자 수 정보를 저장할 스택의이 지역에서 함수 호출.  
  
 공간 함수에서 (alloca)를 동적으로 할당 됩니다, 경우 다음 비휘발성 레지스터를 사용 해야 프레임 포인터로 스택의 고정 부분의 표시 하며 해당 레지스터를 저장 하 고 프롤로그에 초기화 해야 합니다. 참고 alloca 사용 동일한 호출자에서 호출 동일한 호출 수신자에 게이 등록 매개 변수에 대 한 다른 자택 주소가 있을 수 있습니다.  
  
 스택의 항상 유지 관리될지 16 바이트 (예를 들어 반환 주소 푸시 후), 프롤로그 내에서 제외 하 고 표시 된 위치를 제외 하 고 맞추고 [함수 형식](../build/function-types.md) 프레임 함수의 특정 클래스에 대 한 합니다.  
  
 다음은 예제 함수는 호출에서 리프가 아닌 B 함수 프롤로그를 작동 하는 위치 스택 레이아웃이 스택의 맨 아래에서 B에 필요한 모든 레지스터 및 스택 매개 변수의 공간을 이미 할당 합니다. 호출 반환 주소를 푸시하고 B의 프롤로그 지역 변수, 비휘발성 레지스터 및 함수를 호출 하는 데 필요한 공간에 대 한 공간을 할당 합니다. B alloca를 사용 하는 경우 영역 저장 로컬 변수/비휘발성 레지스터와 매개 변수 스택 영역 사이의 공간 할당 됩니다.  
  
 ![AMD 변환 예제](../build/media/vcamd_conv_ex_5.png "vcAmd_conv_ex_5")  
  
 함수 B를 사용 하는 다른 함수를 호출할 때 RCX에 대 한 반환 주소 집 주소 바로 아래 푸시됩니다.  
  
## <a name="see-also"></a>참고 항목  
 [스택 사용](../build/stack-usage.md)