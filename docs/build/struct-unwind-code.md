---
title: "구조체 UNWIND_CODE | Microsoft Docs"
ms.custom: 
ms.date: 11/04/2016
ms.reviewer: 
ms.suite: 
ms.technology:
- cpp-tools
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- C++
ms.assetid: 104955d8-7e33-4c5a-b0c6-3254648f0af3
caps.latest.revision: 
author: corob-msft
ms.author: corob
manager: ghogen
ms.workload:
- cplusplus
ms.openlocfilehash: 76059ff24b46fd537db0c2670a30cf3f42ee2166
ms.sourcegitcommit: 8fa8fdf0fbb4f57950f1e8f4f9b81b4d39ec7d7a
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 12/21/2017
---
# <a name="struct-unwindcode"></a>구조체 UNWIND_CODE
해제 코드 배열은 비휘발성 레지스터와 rsp 구성에 영향을 주는 프롤로그에 일련의 작업을 기록 하는 데 사용 됩니다. 각 코드 항목의 다음 형식은 같습니다.  
  
|||  
|-|-|  
|UBYTE|프롤로그 내 오프셋된|  
|UBYTE: 4|해제 코드 작업|  
|UBYTE: 4|작업 정보|  
  
 배열의는 프롤로그의 오프셋을 내림차순으로 정렬 됩니다.  
  
 **프롤로그 내 오프셋된**  
 이 작업의 경우 + 1 (즉, 다음 명령의 시작 오프셋)를 수행 하는 명령의 끝 프롤로그의 시작 부분에서 5 만큼 오프셋 합니다.  
  
 **해제 코드 작업**  
 참고: 특정 작업 코드는 로컬 스택 프레임의 값에 대 한 서명 되지 않은 오프셋이 필요합니다. 이 오프셋에서 고정 된 스택 할당의 시작 부분 (가장 낮은 주소)입니다. 프레임 레지스터 필드는 UNWIND_INFO에 0 인 경우이 오프셋에서 RSP입니다. 프레임 레지스터 필드가 0이 아닌 경우 이것이 RSP 있었던 위치 FP 레지스터 설정 되었을 때부터 계산한 오프셋입니다. 이 값은 FP 레지스터 FP reg 오프셋을 뺀 값 (16 * 크기 조정 된 프레임 레지스터는 UNWIND_INFO에서 오프셋). FP 레지스터를 사용 하는 경우 다음 모든 해제 코드 오프셋만 사용 해야 FP 레지스터는 프롤로그에 설정 된 후입니다.  
  
 UWOP_SAVE_XMM128 및 UWOP_SAVE_XMM128_FAR를 제외한 모든 opcode에 대 한 오프셋 항상 8의 배수 이므로 됩니다 관심 있는 모든 스택 값은 8 바이트 경계 (스택 자체 항상 16 바이트로 정렬 되어)에 저장 됩니다. 짧은 오프셋 (512 K 미만)를 사용 하는 작업 코드에 대 한 최종 USHORT이이 코드에 대 한 노드에 8로 나눈 값 오프셋을 보유 합니다. 긴 오프셋을 사용 하는 작업 코드에 대 한 (512 K < = < 4GB 오프셋),이 코드에 대 한 마지막 두 USHORT 노드 (little endian 형태로 표시) 오프셋을 유지 합니다.  
  
 UWOP_SAVE_XMM128 및 UWOP_SAVE_XMM128_FAR opcode에 대 한 오프셋 수 없으므로 항상 16의 배수로 모든 128 비트 XMM 작업 16 바이트 정렬된 메모리에서 수행 되어야 합니다. 따라서 16의 배율 보다 작은 1m 오프셋 허용 UWOP_SAVE_XMM128에 사용 됩니다.  
  
 해제 작업을 코드에는 다음 중 하나입니다.  
  
 (0) UWOP_PUSH_NONVOL 1 노드  
  
 정수 비휘발성 레지스터를 8로 감소 RSP 푸시하십시오. 작업 정보에는 레지스터의 수입니다. 에필로그의 제약 조건으로 인해 UWOP_PUSH_NONVOL 해제 코드 해야 프롤로그에 첫 번째로 표시를 마지막에 해제 코드 배열은 note 합니다. 이 상대적 순서 UWOP_PUSH_MACHFRAME 제외 하 고 다른 모든 해제 코드에 적용 됩니다.  
  
 UWOP_ALLOC_LARGE (1) 2 또는 3 노드  
  
 스택에 대규모의 영역을 할당 합니다. 다음과 같은 두 가지 있습니다. 작업 정보가 0, 다음로 나눈 값 할당의 크기 절과 같을 경우 8는 다음 슬롯에 기록 됩니다 최대 512 K-8 할당 합니다. 작업 정보가 1 이면 할당의 실제 크기 크기는 할당이 허용 little endian 형식으로 다음 두 슬롯에 기록 최대 4GB-8입니다.  
  
 (2) UWOP_ALLOC_SMALL 1 노드  
  
 스택에서 작은 영역을 할당 합니다. 할당의 크기는 작업 정보 필드 * 8 + 8, 128 바이트 8에서 할당이 허용 합니다.  
  
 스택 할당에 대 한 해제 코드는 항상 가능한 가장 짧은 인코딩을 사용 해야 합니다.  
  
|||  
|-|-|  
|**할당 크기**|**해제 코드**|  
|8 ~ 128 바이트|UWOP_ALLOC_SMALL|  
|512 136 K-8 바이트|UWOP_ALLOC_LARGE, 작업 정보가 = 0|  
|4 512 K G-8 바이트|UWOP_ALLOC_LARGE, 작업 정보가 = 1|  
  
 (3) UWOP_SET_FPREG 1 노드  
  
 프레임 포인터 레지스터 레지스터 현재 rsp 구성의 일부 오프셋을 설정 하 여 설정 합니다. 오프셋은는 UNWIND_INFO의 오프셋된 (확장된) 필드 프레임 레지스터와 동일한 값 * 16, 240 0에서 오프셋을 사용할 수 있습니다. 오프셋을 사용 하는 short 형식 명령을 사용 하려면 더 많은 액세스를 허용 하 여 코드 밀도 도움이 되는 고정된 스택 할당의 중간 가리키는 프레임 포인터를 설정할 수 있습니다. Note 작업 정보 필드 예약어 이므로 사용할 수 없습니다.  
  
 (4) UWOP_SAVE_NONVOL 노드 2 개  
  
 MOV 푸시를 대신 사용 하 여 스택에 정수 비휘발성 레지스터를 저장 합니다. 이 주로 사용 축소 래핑을 위해 이전에 할당 된 위치에 있는 스택에 비휘발성 레지스터 저장 합니다. 작업 정보에는 레지스터의 수입니다. 다음에는 크기가 조정 8 스택 오프셋이 기록 됩니다 위의 참고에 설명 된 대로 작업 코드 슬롯을 해제 합니다.  
  
 UWOP_SAVE_NONVOL_FAR (5) 3 개의 노드  
  
 긴 오프셋이 스택에 정수 비휘발성 레지스터를 저장 한 MOV 푸시를 대신 사용합니다. 이 주로 사용 축소 래핑을 위해 이전에 할당 된 위치에 있는 스택에 비휘발성 레지스터 저장 합니다. 작업 정보에는 레지스터의 수입니다. 다음에는 실제 크기 스택 오프셋이 기록 됩니다 위의 참고에 설명 된 대로 작업 코드 슬롯 두 해제 합니다.  
  
 UWOP_SAVE_XMM128 (8) 노드 2 개  
  
 스택에 XMM 등록 한 다음 비휘발성의 모든 128 비트를 저장 합니다. 작업 정보에는 레지스터의 수입니다. 크기가 조정 16 스택 오프셋이 다음 슬롯에 기록 됩니다.  
  
 UWOP_SAVE_XMM128_FAR (9) 3 개의 노드  
  
 모든 128 비트 XMM 등록 한 다음 비휘발성의 긴 오프셋이 스택에 저장 합니다. 작업 정보에는 레지스터의 수입니다. 실제 크기 스택 오프셋은 다음 두 슬롯에 기록 됩니다.  
  
 (10) UWOP_PUSH_MACHFRAME 1 노드  
  
 시스템 프레임을 푸시하십시오.  이 효과 하드웨어 인터럽트 또는 예외를 기록에 사용 됩니다. 다음과 같은 두 가지 있습니다. 작업 정보가 0 이면 다음 밀어넣은 스택에:  
  
|||  
|-|-|  
|RSP + 32|SS|  
|RSP + 24|이전 RSP|  
|RSP + 16|EFLAGS|  
|RSP + 8|CS|  
|RSP|RIP|  
  
 작업 정보가 다음 대신 밀어넣은 다음 1 하는 경우:  
  
|||  
|-|-|  
|RSP + 40|SS|  
|RSP + 32|이전 RSP|  
|RSP + 24|EFLAGS|  
|RSP + 16|CS|  
|RSP + 8|RIP|  
|RSP|오류 코드|  
  
 이 해제 코드는 더미 프롤로그는 하지만 대신 인터럽트 루틴의 실제 시작 지점 앞에 표시 되 고 하기 위해서만 제공 시스템 프레임 누름을 시뮬레이션 하는 곳에 항상 표시 됩니다. UWOP_PUSH_MACHFRAME는 컴퓨터에 개념적으로 다음 작업을 완료를 나타내는 해당 시뮬레이션을 기록 합니다.  
  
 RIP 반환 주소에는 스택 맨 위에서 팝 *Temp*  
  
 푸시 SS  
  
 이전 RSP 푸시  
  
 EFLAGS 푸시  
  
 푸시 CS  
  
 푸시 *Temp*  
  
 (작업 정보가 1 인) 하는 경우 오류 코드 푸시  
  
 시뮬레이션 된 UWOP_PUSH_MACHFRAME 작업 감소 RSP 40으로 (op 정보가 0) 또는 48 (작업 정보가 1 인 하는 데 사용).  
  
 **작업 정보**  
 이러한 4 비트의 의미는 작업 코드에 따라 달라 집니다. 범용 (정수) 레지스터를 인코딩하려면 다음 매핑이 사용 됩니다.  
  
|||  
|-|-|  
|0|RAX|  
|1|RCX|  
|2|RDX|  
|3|RBX|  
|4|RSP|  
|5|RBP|  
|6|RSI|  
|7|RDI|  
|8 ~ 15|R8 R15|  
  
## <a name="see-also"></a>참고 항목  
 [디버거 지원, 예외 처리를 위한 해제 데이터](../build/unwind-data-for-exception-handling-debugger-support.md)